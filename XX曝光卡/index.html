<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XX曝光台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1E40AF',
                        secondary: '#3B82F6',
                        accent: '#60A5FA',
                        neutral: '#F1F5F9',
                        'neutral-dark': '#334155',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .photo-container {
                aspect-ratio: 1/1;
            }
            .card-shadow {
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            }
            .upload-overlay {
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            .photo-wrapper:hover .upload-overlay {
                opacity: 1;
            }
            .signature-pad {
                touch-action: none;
            }
            .grid-container {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">
    <!-- 页面头部 -->
    <header class="bg-gradient-to-r from-primary to-secondary text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold tracking-tight">
                        <i class="fa fa-eye mr-3"></i>XX曝光台
                    </h1>
                    <p class="text-blue-100 mt-1">真相在此，一目了然</p>
                </div>
                <div class="hidden md:flex space-x-4">
                    <button id="saveAsPDF" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                        <i class="fa fa-file-pdf-o mr-2"></i>保存为PDF
                    </button>
                    <button id="saveAsImage" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                        <i class="fa fa-file-image-o mr-2"></i>保存为图片
                    </button>
                    <button id="resetAll" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                        <i class="fa fa-refresh mr-2"></i>重置
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- 曝光卡片区域 -->
        <section class="bg-white rounded-2xl overflow-hidden card-shadow mb-8">
            <div class="p-4">
                <h2 class="text-xl font-semibold text-neutral-dark mb-4">图片区域</h2>
                <div class="grid-container">
                    <!-- 九宫格图片区域 -->
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image1" src="https://picsum.photos/seed/photo1/300/300" alt="图片1" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input1" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input1" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image1')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image2" src="https://picsum.photos/seed/photo2/300/300" alt="图片2" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input2" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input2" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image2')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image3" src="https://picsum.photos/seed/photo3/300/300" alt="图片3" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input3" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input3" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image3')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image4" src="https://picsum.photos/seed/photo4/300/300" alt="图片4" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input4" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input4" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image4')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image5" src="https://picsum.photos/seed/photo5/300/300" alt="图片5" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input5" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input5" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image5')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image6" src="https://picsum.photos/seed/photo6/300/300" alt="图片6" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input6" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input6" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image6')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image7" src="https://picsum.photos/seed/photo7/300/300" alt="图片7" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input7" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input7" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image7')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image8" src="https://picsum.photos/seed/photo8/300/300" alt="图片8" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input8" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input8" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image8')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-wrapper relative">
                        <div class="photo-container bg-neutral rounded-xl overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300">
                            <img id="image9" src="https://picsum.photos/seed/photo9/300/300" alt="图片9" class="w-full h-full object-cover">
                            <div class="upload-overlay absolute inset-0 bg-black/50 flex items-center justify-center">
                                <label for="input9" class="cursor-pointer text-white bg-primary/80 hover:bg-primary px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                                    <i class="fa fa-upload mr-2"></i>更换图片
                                </label>
                                <input type="file" id="input9" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'image9')">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 签名区域 -->
            <div class="p-4 border-t border-gray-200">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-3">
                    <h2 class="text-lg font-semibold text-neutral-dark">签名区</h2>
                    <div class="flex space-x-2 mt-2 md:mt-0">
                        <button id="clearSignature" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                            <i class="fa fa-eraser mr-2"></i>清除
                        </button>
                        <button id="saveSignature" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                            <i class="fa fa-check mr-2"></i>保存
                        </button>
                    </div>
                </div>
                <div class="border-2 border-gray-300 rounded-xl p-2 bg-gray-50">
                    <canvas id="signatureCanvas" class="w-full h-40 bg-white rounded-lg shadow-inner signature-pad" touch-action="none"></canvas>
                    <p class="text-sm text-gray-500 mt-2 text-right">在此区域手写签名</p>
                </div>
            </div>
        </section>

        <!-- 移动端按钮 -->
        <div class="md:hidden flex flex-wrap justify-center gap-3 mb-8">
            <button id="mobileSaveAsPDF" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                <i class="fa fa-file-pdf-o mr-2"></i>保存为PDF
            </button>
            <button id="mobileSaveAsImage" class="bg-secondary hover:bg-secondary/90 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                <i class="fa fa-file-image-o mr-2"></i>保存为图片
            </button>
            <button id="mobileResetAll" class="bg-neutral-dark hover:bg-neutral-dark/90 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center">
                <i class="fa fa-refresh mr-2"></i>重置
            </button>
        </div>
    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-xl font-bold">XX曝光台</h2>
                    <p class="text-gray-400 mt-1">真相在此，一目了然</p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                        <i class="fa fa-weibo text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                        <i class="fa fa-wechat text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                        <i class="fa fa-envelope text-xl"></i>
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-6 pt-6 text-center text-gray-400 text-sm">
                <p>© 2025 XX曝光台. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <script>
        // 图片上传处理
        function handleImageUpload(input, targetId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById(targetId).src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // 签名功能实现
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('signatureCanvas');
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            // 设置Canvas尺寸
            function resizeCanvas() {
                const { width, height } = canvas.getBoundingClientRect();
                // 考虑设备像素比以获得清晰的线条
                const dpr = window.devicePixelRatio || 1;
                canvas.width = width * dpr;
                canvas.height = height * dpr;
                ctx.scale(dpr, dpr);
                ctx.clearRect(0, 0, width, height);
            }
            
            // 初始化Canvas
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // 设置绘图样式
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#334155';
            
            // 鼠标/触摸事件处理
            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                if (e.type === 'mousedown') {
                    [lastX, lastY] = [e.clientX - rect.left, e.clientY - rect.top];
                } else {
                    [lastX, lastY] = [e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top];
                }
            }
            
            function draw(e) {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                let x, y;
                
                if (e.type === 'mousemove') {
                    x = e.clientX - rect.left;
                    y = e.clientY - rect.top;
                } else {
                    e.preventDefault(); // 防止触摸滚动
                    x = e.touches[0].clientX - rect.left;
                    y = e.touches[0].clientY - rect.top;
                }
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
                [lastX, lastY] = [x, y];
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            // 绑定鼠标事件
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // 绑定触摸事件
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);
            canvas.addEventListener('touchcancel', stopDrawing);
            
            // 清除签名
            document.getElementById('clearSignature').addEventListener('click', function() {
                const { width, height } = canvas.getBoundingClientRect();
                ctx.clearRect(0, 0, width, height);
            });
            
            // 保存签名
            document.getElementById('saveSignature').addEventListener('click', function() {
                const dataURL = canvas.toDataURL();
                // 这里可以将dataURL保存到服务器或本地
                alert('签名已保存!');
            });

            // 保存为PDF
            function saveAsPDF() {
                html2canvas(document.querySelector('.card-shadow'), {
                    scale: 2,
                    useCORS: true,
                    logging: false
                }).then(canvas => {
                    const imgData = canvas.toDataURL('image/jpeg', 1.0);
                    const pdf = new jspdf.jsPDF({
                        orientation: 'portrait',
                        unit: 'mm',
                        format: 'a4'
                    });
                    
                    const imgWidth = 210;
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    
                    pdf.addImage(imgData, 'JPEG', 0, 0, imgWidth, imgHeight);
                    pdf.save('XX曝光台.pdf');
                });
            }

            // 保存为图片
            function saveAsImage() {
                html2canvas(document.querySelector('.card-shadow'), {
                    scale: 2,
                    useCORS: true,
                    logging: false
                }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = 'XX曝光台.png';
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                });
            }

            // 重置所有图片
            function resetAllImages() {
                for (let i = 1; i <= 9; i++) {
                    document.getElementById(`image${i}`).src = `https://picsum.photos/seed/photo${i}/300/300`;
                    document.getElementById(`input${i}`).value = '';
                }
                
                // 清除签名
                const { width, height } = canvas.getBoundingClientRect();
                ctx.clearRect(0, 0, width, height);
                
                alert('所有内容已重置为默认状态!');
            }

            // 绑定导出按钮事件
            document.getElementById('saveAsPDF').addEventListener('click', saveAsPDF);
            document.getElementById('saveAsImage').addEventListener('click', saveAsImage);
            document.getElementById('resetAll').addEventListener('click', resetAllImages);
            
            // 移动端按钮事件
            document.getElementById('mobileSaveAsPDF').addEventListener('click', saveAsPDF);
            document.getElementById('mobileSaveAsImage').addEventListener('click', saveAsImage);
            document.getElementById('mobileResetAll').addEventListener('click', resetAllImages);
        });
    </script>
</body>
</html>
    
